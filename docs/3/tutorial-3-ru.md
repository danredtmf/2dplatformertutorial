# 2D –ü–ª–∞—Ç—Ñ–æ—Ä–º–µ—Ä

> –ß–∞—Å—Ç—å —Ç—Ä–µ—Ç—å—è

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞](#1-–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞)
- [2. –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª—é—á–∞ –¥–ª—è –ø–æ—Ä—Ç–∞–ª–∞](#2-—Å–æ–∑–¥–∞–Ω–∏–µ-–∫–ª—é—á–∞-–¥–ª—è-–ø–æ—Ä—Ç–∞–ª–∞)
- [3. –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å–ª–æ—ë–≤ –∏ –º–∞—Å–æ–∫ –∫–æ–ª–ª–∏–∑–∏–∏ —É –æ–±—ä–µ–∫—Ç–æ–≤](#3-–∏–∑–º–µ–Ω–µ–Ω–∏–µ-—Å–ª–æ—ë–≤-–∏-–º–∞—Å–æ–∫-–∫–æ–ª–ª–∏–∑–∏–∏-—É-–æ–±—ä–µ–∫—Ç–æ–≤)
- [4. –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–¥–∞ —É –æ–±—ä–µ–∫—Ç–æ–≤](#4-–∏–∑–º–µ–Ω–µ–Ω–∏–µ-–∫–æ–¥–∞-—É-–æ–±—ä–µ–∫—Ç–æ–≤)
- [5. –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–∫—Ä—ã–≤–∞—Ç—å –ø–æ—Ä—Ç–∞–ª —Å –ø–æ–º–æ—â—å—é –∫–ª—é—á–∞](#5-–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å-–æ—Ç–∫—Ä—ã–≤–∞—Ç—å-–ø–æ—Ä—Ç–∞–ª-—Å-–ø–æ–º–æ—â—å—é-–∫–ª—é—á–∞)
- [6. –°–æ–∑–¥–∞–Ω–∏–µ –º–æ–Ω–µ—Ç—ã](#6-—Å–æ–∑–¥–∞–Ω–∏–µ-–º–æ–Ω–µ—Ç—ã)
- [7. –°–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –∏–≥—Ä–æ–∫–∞: —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ –º–æ–Ω–µ—Ç—ã –≤ –º–∏—Ä–µ](#7-—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å-–∏–≥—Ä–æ–∫–∞-—Ä–∞–∑–º–µ—â–µ–Ω–∏–µ-–º–æ–Ω–µ—Ç—ã-–≤-–º–∏—Ä–µ)


## 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

–î–ª—è –Ω–∞—á–∞–ª–∞ –¥–æ–±–∞–≤–∏–º –Ω–æ–≤–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–∞ –∫–ª–∞–≤–∏—à—É, –∞ —Ç–∞–∫–∂–µ –¥–æ–±–∞–≤–∏–º –∫ –Ω–µ–∫–æ—Ç–æ—Ä—ã–º –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º –¥–µ–π—Å—Ç–≤–∏—è–º –Ω–æ–≤—ã–µ –∫–ª–∞–≤–∏—à–∏.

–û—Ç–∫—Ä–æ–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞ –∏ –≤ —Ä–∞–∑–¥–µ–ª–µ `Input Map` –¥–æ–±–∞–≤–∏–º –Ω–æ–≤–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ `drop` –Ω–∞ –∫–ª–∞–≤–∏—à—É `Q` –∏ –≤ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –æ–ø—Ü–∏—è—Ö –∫–ª–∞–≤–∏—à–∏ –≤—ã–±–µ—Ä–µ–º `Keycode (Latin Equivalent)`.

–ó–∞—Ç–µ–º, –≤ –¥–∞–Ω–Ω–æ–º —Ä–∞–∑–¥–µ–ª–µ –≤–∫–ª—é—á–∏–º `Show Built-in Actions` (–ø—Ä–∏–º. –ø–µ—Ä–µ–≤–æ–¥ `–ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è`), –Ω–∞–π–¥—ë–º —É–∫–∞–∑–∞–Ω–Ω—ã–µ –Ω–∏–∂–µ –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –∏ –¥–æ–±–∞–≤–∏–º –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–µ –∫–ª–∞–≤–∏—à–∏:

- `ui_up`
  - –î–æ–±–∞–≤–∏—Ç—å –∫–ª–∞–≤–∏—à—É `W` (`Keycode (Latin Equivalent)`)
- `ui_down`
  - –î–æ–±–∞–≤–∏—Ç—å –∫–ª–∞–≤–∏—à—É `S` (`Keycode (Latin Equivalent)`)
- `ui_left`
  - –î–æ–±–∞–≤–∏—Ç—å –∫–ª–∞–≤–∏—à—É `A` (`Keycode (Latin Equivalent)`)
- `ui_right`
  - –î–æ–±–∞–≤–∏—Ç—å –∫–ª–∞–≤–∏—à—É `D` (`Keycode (Latin Equivalent)`)

<div style="text-align: center;"><img src="./images/1-1.png" alt="–†–∏—Å—É–Ω–æ–∫ 1-1 ‚Äì –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –∫–ª–∞–≤–∏—à –∫ –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º –¥–µ–π—Å—Ç–≤–∏—è–º"></div>
<p align="center">–†–∏—Å—É–Ω–æ–∫ 1-1 ‚Äì –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –∫–ª–∞–≤–∏—à –∫ –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º –¥–µ–π—Å—Ç–≤–∏—è–º</p>

## 2. –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª—é—á–∞ –¥–ª—è –ø–æ—Ä—Ç–∞–ª–∞

–°–æ–∑–¥–∞—ë–º –Ω–æ–≤—É—é —Å—Ü–µ–Ω—É —Ç–∏–ø–∞ `RigidBody2D` –∏ –Ω–∞–∑—ã–≤–∞–µ–º –µ–≥–æ `PortalKey`. 

–û—Ç–¥–µ–ª—å–Ω–æ –ø–æ–≥–æ–≤–æ—Ä–∏–º –ø—Ä–æ —Ç–∞–∫ –Ω–∞–∑—ã–≤–∞–µ–º—ã–µ —Ñ–∏–∑–∏—á–µ—Å–∫–∏–µ —Å–ª–æ–∏ –∏ –º–∞—Å–∫–∏ –∫–æ–ª–ª–∏–∑–∏–∏. –†–∞—Å–∫—Ä–æ–π—Ç–µ —É –¥–∞–Ω–Ω–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ –≤–∫–ª–∞–¥–∫—É `Collision`. –í—ã —É–≤–∏–¥–∏—Ç–µ –¥–≤–µ –±–æ–ª—å—à–∏–µ –≥—Ä—É–ø–ø—ã: —Å–ª–æ–∏ (`Layer`) –∏ –º–∞—Å–∫–∏ (`Mask`) –∫–æ–ª–ª–∏–∑–∏–∏ (—Ä–∏—Å. 2-1).

<div style="text-align: center;"><img src="./images/2-1.png" alt="–†–∏—Å—É–Ω–æ–∫ 2-1 ‚Äì –ì—Ä—É–ø–ø—ã —Å–ª–æ—ë–≤ –∫–æ–ª–ª–∏–∑–∏–∏"></div>
<p align="center">–†–∏—Å—É–Ω–æ–∫ 2-1 ‚Äì –ì—Ä—É–ø–ø—ã —Å–ª–æ—ë–≤ –∫–æ–ª–ª–∏–∑–∏–∏</p>

–ì—Ä—É–ø–ø–∞ —Å–ª–æ—ë–≤ (`Layer`) –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Ç–æ, –≤ –∫–∞–∫–∏—Ö —Å–ª–æ—è—Ö –±—É–¥–µ—Ç –Ω–∞—Ö–æ–¥–∏—Ç—Å—è —É–∑–µ–ª, –≤ –∫–æ—Ç–æ—Ä–æ–º –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –¥–∞–Ω–Ω–∞—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤—ã–±–æ—Ä–∞, —Ç.–µ. –≤ –∫–∞–∫–∏—Ö —Å–ª–æ—è—Ö –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤—ã–±—Ä–∞–Ω–Ω—ã–π —É–∑–µ–ª. –ì—Ä—É–ø–ø–∞ –º–∞—Å–æ–∫ (`Mask`) –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Ç–æ, –∫–∞–∫–∏–µ –º–∞—Å–∫–∏ –±—É–¥–µ—Ç —É—á–∏—Ç—ã–≤–∞—Ç—å —É–∑–µ–ª, –≤ –∫–æ—Ç–æ—Ä–æ–º –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –¥–∞–Ω–Ω–∞—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤—ã–±–æ—Ä–∞, —Ç.–µ. –∫–∞–∫–∏–µ –º–∞—Å–∫–∏ –±—É–¥–µ—Ç –≤–∏–¥–µ—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–π —É–∑–µ–ª.

–ú–æ–∂–Ω–æ –ø—Ä–∏–≤–µ—Å—Ç–∏ –ø—Ä–∏–º–µ—Ä: –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∏–≥—Ä–æ–∫–∞, –æ—Ç–≤–µ—á–∞—é—â–∏–π –∑–∞ –Ω–∞—Ö–æ–∂–¥–µ–Ω–∏–µ –≤ –º–∏—Ä–µ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –≤ –º–∏—Ä–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –º–æ–Ω–µ—Ç—ã) –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –Ω–∏ –Ω–∞ –æ–¥–Ω–æ–º —Å–ª–æ–µ (`Layer`), –Ω–æ –ø—Ä–∏ —ç—Ç–æ–º —É –Ω–µ–≥–æ –≤—ã–±—Ä–∞–Ω–∞ –º–∞—Å–∫–∞ (`Mask`) `Interactive`. –≠—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ –¥–∞–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç –Ω–µ –±—É–¥–µ—Ç –≤–∏–¥–µ—Ç—å –Ω–∏–∫—Ç–æ –∏–∑-–∑–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —Å–ª–æ—ë–≤, –Ω–æ —Å–∞–º –æ–±—ä–µ–∫—Ç –±—É–¥–µ—Ç –≤–∏–¥–µ—Ç—å —Ç–æ–ª—å–∫–æ –æ–±—ä–µ–∫—Ç—ã, —É –∫–æ—Ç–æ—Ä—ã—Ö –±—É–¥–µ—Ç –≤—ã–±—Ä–∞–Ω —Å–ª–æ–π (`Layer`) `Interactive`.

–ï—Å–ª–∏ –µ—â—ë –ø—Ä–æ—â–µ, —Ç–æ –Ω–∞ —Å–ª–æ—è—Ö –Ω–∞—Ö–æ–¥—è—Ç—Å—è –æ–±—ä–µ–∫—Ç—ã, –∞ —Å –ø–æ–º–æ—â—å—é –º–∞—Å–æ–∫ –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ —ç—Ç–∏ –æ–±—ä–µ–∫—Ç—ã.

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤—Å–µ –æ–±—ä–µ–∫—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –∫–∞–∫–∏–º-–ª–∏–±–æ –æ–±—Ä–∞–∑–æ–º –æ–±—Ä–∞–∑—É—é—Ç –æ–±–ª–∞—Å—Ç—å —Å–æ–ø—Ä–∏–∫–æ—Å–Ω–æ–≤–µ–Ω–∏—è –∏–ª–∏ –∫–æ–ª–ª–∏–∑–∏—é, –Ω–∞—Ö–æ–¥—è—Ç—Å—è –Ω–∞ —Å–ª–æ–µ –∏ –º–∞—Å–∫–µ `1`.

–ï—Å–ª–∏ –≤—ã –Ω–∞–∂–º—ë—Ç–µ –Ω–∞ —Ç—Ä–∏ —Ç–æ—á–∫–∏ —Å–ø—Ä–∞–≤–∞ –æ—Ç –≥—Ä—É–ø–ø—ã —Å–ª–æ—ë–≤ –∏–ª–∏ –º–∞—Å–æ–∫, –æ—Ç–∫—Ä–æ—é—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞ —Ä–∞–∑–¥–µ–ª–∞ `General` –≤–∫–ª–∞–¥–∫–∏ `Layer Names` –ø—É–Ω–∫—Ç–∞ `2D Physics` (–º—ã –∂–µ –¥–µ–ª–∞–µ–º 2D –∏–≥—Ä—É, –≤–µ—Ä–Ω–æ? üôÇ)

<div style="text-align: center;"><img src="./images/2-2.png" alt="–†–∏—Å—É–Ω–æ–∫ 2-2 ‚Äì –°–ø–∏—Å–æ–∫ 2D —Å–ª–æ—ë–≤ –∫–æ–ª–ª–∏–∑–∏–∏"></div>
<p align="center">–†–∏—Å—É–Ω–æ–∫ 2-2 ‚Äì –°–ø–∏—Å–æ–∫ 2D —Å–ª–æ—ë–≤ –∫–æ–ª–ª–∏–∑–∏–∏</p>

–û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏—è –¥–ª—è –ø–µ—Ä–≤—ã—Ö —á–µ—Ç—ã—Ä—ë—Ö —Å–ª–æ—ë–≤ —Ç–∞–∫ –∂–µ, –∫–∞–∫ –ø–æ–∫–∞–∑–∞–Ω–æ –Ω–∞ —Ä–∏—Å—É–Ω–∫–µ –≤—ã—à–µ –∏ –∑–∞—Ç–µ–º –º–æ–∂–µ—Ç–µ –∑–∞–∫—Ä—ã—Ç—å –¥–∞–Ω–Ω–æ–µ –æ–∫–Ω–æ.

–í–µ—Ä–Ω—ë–º—Å—è –∫ –≤–∫–ª–∞–¥–∫–µ `Collision` —É –Ω–∞—à–µ–≥–æ –æ–±—ä–µ–∫—Ç–∞ `PortalKey`. –í –≥—Ä—É–ø–ø–µ `Layer` –≤—ã–±–µ—Ä–µ–º —Å–ª–æ–π `3` (`Interactive`) –∏ –≤—ã–∫–ª—é—á–∏–º —Å–ª–æ–π `1` (`World`). –ì—Ä—É–ø–ø—É –º–∞—Å–æ–∫ –Ω–µ –∏–∑–º–µ–Ω—è–µ–º.

<div style="text-align: center;"><img src="./images/2-3.png" alt="–†–∏—Å—É–Ω–æ–∫ 2-3 ‚Äì –í—ã–±—Ä–∞–Ω–Ω—ã–µ —Å–ª–æ–∏ –∏ –º–∞—Å–∫–∏ —É `PortalKey`"></div>
<p align="center">–†–∏—Å—É–Ω–æ–∫ 2-3 ‚Äì –í—ã–±—Ä–∞–Ω–Ω—ã–µ —Å–ª–æ–∏ –∏ –º–∞—Å–∫–∏ —É `PortalKey`</p>

> –ö–ª—é—á –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Å–ª–æ–µ —Å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–º–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏, –Ω–æ —Å –ø–æ–º–æ—â—å—é –º–∞—Å–∫–∏ `World` –º–æ–∂–µ—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å –º–∏—Ä–æ–º –∏–≥—Ä—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ª–µ–∂–∞—Ç—å –Ω–∞ –∑–µ–º–ª–µ, –∞ –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å —á–µ—Ä–µ–∑ –Ω–µ—ë)
>
> –ò–∑–º–µ–Ω—è—Ç—å —Å–ª–æ–∏ –∏ –º–∞—Å–∫–∏ —É –∏–º–µ—é—â–∏—Ö—Å—è –æ–±—ä–µ–∫—Ç–æ–≤ –≤ –∏–≥—Ä–µ –±—É–¥–µ–º —á—É—Ç—å –ø–æ–∑–∂–µ.
>
> –ù–æ–≤—ã–µ —Å–ø—Ä–∞–π—Ç—ã –±—É–¥—É—Ç –Ω–∞—Ö–æ–¥–∏—Ç—Å—è —Ä—è–¥–æ–º —Å —Ç–µ–∫—É—â–∏–º PDF –¥–æ–∫—É–º–µ–Ω—Ç–æ–º –≤ –ø–∞–ø–∫–µ `resources/sprites`.

–°–æ–∑–¥–∞—ë–º —Å–ª–µ–¥—É—é—â—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –≤–Ω—É—Ç—Ä–∏ –æ–±—ä–µ–∫—Ç–∞:

- `InteractiveArea` (`ID`: `portal_key`, `UI Name`: `–ö–ª—é—á`, `UI Desc`: `–í–∑—è—Ç—å`, `Delete After`: `true`, `Size`: `(x: 64, y: 28)`, `Position`: `(x: 0, y: -2)`)
- `Sprite2D` (`Texture`: –≤—ã–±–∏—Ä–∞–µ–º —Å–ø—Ä–∞–π—Ç –∫–ª—é—á–∞ `key.png`, `Scale`: `(x: 0, y: 0)`)
- `Polygon` (—Ç–∏–ø `CollisionPolygon2D`; —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º —á—É—Ç—å –Ω–∏–∂–µ)
- `AnimationPlayer` (—Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º —á—É—Ç—å –Ω–∏–∂–µ)

–ú–æ–∂–µ–º —Å–æ–∑–¥–∞—Ç—å –ø–æ–ª–∏–≥–æ–Ω–∞–ª—å–Ω—É—é –∫–æ–ª–ª–∏–∑–∏—é –¥–ª—è —Ñ–∏–∑–∏—á–µ—Å–∫–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –º–∏—Ä–æ–º (–∫–ª—é—á –±—É–¥–µ—Ç –ø–∞–¥–∞—Ç—å –Ω–∞ –∑–µ–º–ª—é). –ù–∞–∂–∏–º–∞–µ–º –Ω–∞ —É–∑–µ–ª `Sprite2D` –∏ –≤ –ø–∞–Ω–µ–ª–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ (—Ä–∏—Å. 2-4) –Ω–∞–∂–∏–º–∞–µ–º –Ω–∞ `Sprite2D` –∏ –≤—ã–±–∏—Ä–∞–µ–º `Create CollisionPolygon2D`.

<div style="text-align: center;"><img src="./images/2-4.png" alt="–†–∏—Å—É–Ω–æ–∫ 2-3 ‚Äì –í—ã–±—Ä–∞–Ω–Ω—ã–µ —Å–ª–æ–∏ –∏ –º–∞—Å–∫–∏ —É `PortalKey`"></div>
<p align="center">–†–∏—Å—É–Ω–æ–∫ 2-3 ‚Äì –í—ã–±—Ä–∞–Ω–Ω—ã–µ —Å–ª–æ–∏ –∏ –º–∞—Å–∫–∏ —É `PortalKey`</p>

–í –æ—Ç–∫—Ä—ã–≤—à–µ–º—Å—è –æ–∫–Ω–µ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (—Ä–∏—Å. 2-4) –∏ –Ω–∞–∂–∏–º–∞–µ–º –∫–Ω–æ–ø–∫—É `Create CollisionPolygon2D`.

<div style="text-align: center;"><img src="./images/2-5.png" alt="–†–∏—Å—É–Ω–æ–∫ 2-4 ‚Äì –°–æ–∑–¥–∞—Ç—å –ø–æ–ª–∏–≥–æ–Ω–∞–ª—å–Ω—É—é –∫–æ–ª–ª–∏–∑–∏—é"></div>
<p align="center">–†–∏—Å—É–Ω–æ–∫ 2-4 ‚Äì –°–æ–∑–¥–∞—Ç—å –ø–æ–ª–∏–≥–æ–Ω–∞–ª—å–Ω—É—é –∫–æ–ª–ª–∏–∑–∏—é</p>

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –ø–æ–ø—Ä–∞–≤–∏—Ç—å —Å–µ—Ç–∫—É –ø–æ–ª–∏–≥–æ–Ω–æ–≤, –º–æ–∂–µ—Ç–µ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –ø–∞–Ω–µ–ª—å—é –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ (—Ä–∏—Å. 2-6). –ü–æ—Å–ª–µ –æ–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤—ã—Å—Ç–∞–≤–ª—è–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ `(x: 0, y: 0)` —É —Å–≤–æ–π—Å—Ç–≤–∞ `Scale` —É–∑–ª–∞ `Polygon`.

<div style="text-align: center;"><img src="./images/2-6.png" alt="–†–∏—Å—É–Ω–æ–∫ 2-6 ‚Äì –°–æ–∑–¥–∞—Ç—å –ø–æ–ª–∏–≥–æ–Ω–∞–ª—å–Ω—É—é –∫–æ–ª–ª–∏–∑–∏—é"></div>
<p align="center">–†–∏—Å—É–Ω–æ–∫ 2-6 ‚Äì –ü–∞–Ω–µ–ª—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –ø–æ–ª–∏–≥–æ–Ω–∞–ª—å–Ω–æ–π –∫–æ–ª–ª–∏–∑–∏–∏</p>

–°–æ–∑–¥–∞—ë–º –∞–Ω–∏–º–∞—Ü–∏—é –ø–æ—è–≤–ª–µ–Ω–∏—è –æ–±—ä–µ–∫—Ç–∞ –≤ –º–∏—Ä–µ. –°–æ–∑–¥–∞—ë–º –¥–æ—á–µ—Ä–Ω–∏–π —É–∑–µ–ª `AnimationPlayer`, –µ—Å–ª–∏ –æ–Ω –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç. –ó–∞—Ç–µ–º, –Ω–∞–∂–∏–º–∞–µ–º –Ω–∞ –¥–∞–Ω–Ω—ã–π —É–∑–µ–ª –∏ –≤–Ω–∏–∑—É –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–∞–Ω–µ–ª—å `Animation` (—Ä–∏—Å. 2-7).

<div style="text-align: center;"><img src="./images/2-7.png" alt="–ü–∞–Ω–µ–ª—å `Animation`"></div>
<p align="center">–†–∏—Å—É–Ω–æ–∫ 2-7 ‚Äì –ü–∞–Ω–µ–ª—å `Animation`</p>

–ú—ã –Ω–µ –ø—Ä–æ—Å—Ç–æ —Ç–∞–∫ –≤—ã—Å—Ç–∞–≤–∏–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ `Scale` —É —Å–ø—Ä–∞–π—Ç–∞ –∏ –∫–æ–ª–ª–∏–∑–∏–∏ –ø–æ –Ω—É–ª—è–º, —ç—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è –Ω–∞—á–∞–ª–∞ –∞–Ω–∏–º–∞—Ü–∏–∏ –ø–æ—è–≤–ª–µ–Ω–∏—è.

–í –ø–∞–Ω–µ–ª–∏ `Animation`, –Ω–∞–∂–∏–º–∞–µ–º –Ω–∞ –∫–Ω–æ–ø–∫—É `Animation` –∏ –≤ –æ—Ç–∫—Ä—ã–≤—à–µ–º—Å—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–º –º–µ–Ω—é –Ω–∞–∂–º—ë–º –∫–Ω–æ–ø–∫—É `New...`. –í –æ—Ç–∫—Ä—ã–≤—à–µ–º—Å—è –æ–∫–Ω–µ –≤–≤–µ–¥—ë–º –Ω–∞–∑–≤–∞–Ω–∏–µ –∞–Ω–∏–º–∞—Ü–∏–∏ `show`.

–í—ã—Å—Ç–∞–≤–∏–º –∫–∞—Ä–µ—Ç–∫—É –≤ –ø–æ–ª–æ–∂–µ–Ω–∏–µ `0` (—ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –≤—ã –º–æ–∂–µ—Ç–µ —É–≤–∏–¥–µ—Ç—å –∏–ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å —Å–ª–µ–≤–∞ –æ—Ç –∫–Ω–æ–ø–∫–∏ `Animation`). –í–æ –≤—Ä–µ–º—è –æ—Ç–∫—Ä—ã—Ç–æ–π –ø–∞–Ω–µ–ª–∏ `Animation` –∑–∞—Ö–æ–¥–∏–º –≤ —É–∑–µ–ª `Sprite2D` –∏ –≤–∏–¥–∏–º, —á—Ç–æ —Ä—è–¥–æ–º —Å —Å–≤–æ–π—Å—Ç–≤–∞–º–∏ –ø–æ—è–≤–∏–ª–∏—Å—å –∏–∫–æ–Ω–∫–∏ –∫–ª—é—á–∞. –≠—Ç–æ –≥–æ–≤–æ—Ä–∏—Ç –æ —Ç–æ–º, —á—Ç–æ –º—ã –º–æ–∂–µ–º –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ —Å–≤–æ–π—Å—Ç–≤ –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è –∞–Ω–∏–º–∞—Ü–∏–∏ –≤ –≤–∏–¥–µ –∫–ª—é—á–∞ –∞–Ω–∏–º–∞—Ü–∏–∏. –ù–∞—Ö–æ–¥–∏–º —Å–≤–æ–π—Å—Ç–≤–æ `Scale` —É `Sprite2D` –∏ –Ω–∞–∂–∏–º–∞–µ–º –Ω–∞ –∏–∫–æ–Ω–∫—É –∫–ª—é—á–∞. –í –æ—Ç–∫—Ä—ã–≤—à–µ–º—Å—è –æ–∫–Ω–µ –Ω–∞—Å –∏–Ω—Ñ–æ—Ä–º–∏—Ä—É—é—Ç –æ—Ç —Ç–æ–º, —á—Ç–æ –º—ã —Å–æ–±–∏—Ä–∞–µ–º—Å—è –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Å–≤–æ–π—Å—Ç–≤–∞ –∏ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç —Å–æ–∑–¥–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –∞–Ω–∏–º–∞—Ü–∏—é `RESET` –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞—á–∞–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π —Å–≤–æ–π—Å—Ç–≤ (—Ä–∏—Å. 2-8). –ü—Ä–æ—Å—Ç–æ –Ω–∞–∂–∏–º–∞–µ–º –∫–Ω–æ–ø–∫—É `Create`.

<div style="text-align: center;"><img src="./images/2-8.png" alt="–†–∏—Å—É–Ω–æ–∫ 2-8 ‚Äì –§–∏–∫—Å–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ —Å–≤–æ–π—Å—Ç–≤–∞ –≤ –∞–Ω–∏–º–∞—Ü–∏–∏"></div>
<p align="center">–†–∏—Å—É–Ω–æ–∫ 2-8 ‚Äì –§–∏–∫—Å–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ —Å–≤–æ–π—Å—Ç–≤–∞ –≤ –∞–Ω–∏–º–∞—Ü–∏–∏</p>

–í –Ω–∏–∂–Ω–µ–π –ø–∞–Ω–µ–ª–∏ `Animation` –∏–∑–º–µ–Ω—è–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ `Snap` –Ω–∞ `0.1`. —Ç–µ–ø–µ—Ä—å –º—ã –º–æ–∂–µ–º –ø–µ—Ä–µ–º–µ—â–∞—Ç—å –∫–∞—Ä–µ—Ç–∫—É –Ω–∞ –∞–Ω–∏–º–∞—Ü–∏–æ–Ω–Ω–æ–π –¥–æ—Ä–æ–∂–∫–µ —Å —à–∞–≥–æ–º `0.1`. –ü–µ—Ä–µ–º–µ—â–∞–µ–º –∫–∞—Ä–µ—Ç–∫—É –Ω–∞ –∑–Ω–∞—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ `0.5` –∏ –≤–Ω—É—Ç—Ä–∏ –¥–æ—Ä–æ–∂–∫–∏ —Å–≤–æ–π—Å—Ç–≤–∞ `scale` –Ω–∞–∂–∏–º–∞–µ–º `–ü–ö–ú` (–ü—Ä–∞–≤–∞—è –ö–Ω–æ–ø–∫–∞ –ú—ã—à–∏) –Ω–∞ –∫–∞—Ä–µ—Ç–∫—É –∏ –≤—ã–±–∏—Ä–∞–µ–º –∫–Ω–æ–ø–∫—É `Insert Key...`. –ù–∞–∂–∏–º–∞–µ–º –Ω–∞ —Å–æ–∑–¥–∞–Ω–Ω—ã–π –∫–ª—é—á –∞–Ω–∏–º–∞—Ü–∏–∏, –≤ –ø—Ä–∞–≤–æ–π —á–∞—Å—Ç–∏ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ (–≤–∫–ª–∞–¥–∫–∞ `Inspector`) –æ—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –∫–ª—é—á–∞ –∞–Ω–∏–º–∞—Ü–∏–∏. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –∫–ª—é—á–∞ `Time` –∑–∞–¥–∞–Ω–æ `0.5` –∏ —Å–≤–æ–π—Å—Ç–≤–µ `Value` —É–∫–∞–∂–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ `(x: 1, y: 1)`.

<div style="text-align: center;"><img src="./images/2-9.png" alt="–†–∏—Å—É–Ω–æ–∫ 2-9 ‚Äì –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–ª—é—á–∞ –∞–Ω–∏–º–∞—Ü–∏–∏"></div>
<p align="center">–†–∏—Å—É–Ω–æ–∫ 2-9 ‚Äì –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–ª—é—á–∞ –∞–Ω–∏–º–∞—Ü–∏–∏</p>

–¢–µ–ø–µ—Ä—å —Ç–∞–∫–∂–µ –∑–∞—Ñ–∏–∫—Å–∏—Ä—É–π—Ç–µ —Å–≤–æ–π—Å—Ç–≤–æ `Scale` —É —É–∑–ª–∞ `Polygon` –≤ –∑–Ω–∞—á–µ–Ω–∏–∏ –≤—Ä–µ–º–µ–Ω–∏ `0`, —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –∫–ª—é—á –∞–Ω–∏–º–∞—Ü–∏–∏ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π –¥–æ—Ä–æ–∂–∫–µ –Ω–∞ –∑–Ω–∞—á–µ–Ω–∏–∏ –≤—Ä–µ–º–µ–Ω–∏ `0.5` –∏ –≤—ã—Å—Ç–∞–≤–∏—Ç–µ —Å–≤–æ–π—Å—Ç–≤–æ `Value`:`(x: 1, y: 1)`.

–°–¥–µ–ª–∞–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π. –í –ø—Ä–∞–≤–æ–π —á–∞—Å—Ç–∏ –ø–∞–Ω–µ–ª–∏ `Animation` —É–∫–∞–∂–∏—Ç–µ –≤—Ä–µ–º—è –∞–Ω–∏–º–∞—Ü–∏–∏ (–∏–∫–æ–Ω–∫–∞ —Å–µ–∫—É–Ω–¥–æ–º–µ—Ä–∞) `0.5`. –¢–µ–ø–µ—Ä—å –∏–∑–º–µ–Ω–∏–º –ø–ª–∞–≤–Ω–æ—Å—Ç—å –¥–æ—Ä–æ–∂–µ–∫ –∞–Ω–∏–º–∞—Ü–∏–∏ –Ω–∞ `Cubic` (—Ä–∏—Å. 2-10).

<div style="text-align: center;"><img src="./images/2-10.png" alt="–†–∏—Å—É–Ω–æ–∫ 2-10 ‚Äì –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –∞–Ω–∏–º–∞—Ü–∏–∏ –∏ –ø–ª–∞–≤–Ω–æ—Å—Ç–∏ –Ω–∞ –¥–æ—Ä–æ–∂–∫–∞—Ö"></div>
<p align="center">–†–∏—Å—É–Ω–æ–∫ 2-10 ‚Äì –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –∞–Ω–∏–º–∞—Ü–∏–∏ –∏ –ø–ª–∞–≤–Ω–æ—Å—Ç–∏ –Ω–∞ –¥–æ—Ä–æ–∂–∫–∞—Ö</p>

–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Å—Ü–µ–Ω—É –≤ –ø–∞–ø–∫–µ `objects` ‚û°Ô∏è `portal` ‚û°Ô∏è `key` —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º —Ñ–∞–π–ª–∞ `portal_key.tscn`.

–°–æ–∑–¥–∞–¥–∏–º –∫–æ–¥ –¥–ª—è `PortalKey`:

```gdscript
class_name PortalKey
extends RigidBody2D

@onready var _animation_player: AnimationPlayer = $AnimationPlayer
@onready var _interactive_area: InteractiveArea = $InteractiveArea

func _ready() -> void:
	_animation_player.play("show")

func get_interactive() -> InteractiveArea:
	return _interactive_area

# –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å —Å–∏–≥–Ω–∞–ª `tree_exited`
# –û—Ç –æ–±—ä–µ–∫—Ç–∞ `InteractiveArea`
# –ö —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–º—É –æ–±—ä–µ–∫—Ç—É (`PortalKey`)
func _on_interactive_area_tree_exited() -> void:
	queue_free()
```

–î–æ–±–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–π —É–∑–µ–ª –Ω–∞ —É—Ä–æ–≤–µ–Ω—å.

## 3. –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å–ª–æ—ë–≤ –∏ –º–∞—Å–æ–∫ –∫–æ–ª–ª–∏–∑–∏–∏ —É –æ–±—ä–µ–∫—Ç–æ–≤

- –£–∑–µ–ª `InteractiveArea`
  - –í –≥—Ä—É–ø–ø–µ `Layer` –≤—ã–±–µ—Ä–µ–º —Å–ª–æ–π `3` (`Interactive`) –∏ –≤—ã–∫–ª—é—á–∏–º —Å–ª–æ–π `1` (`World`). –ì—Ä—É–ø–ø—É –º–∞—Å–æ–∫ –Ω–µ –∏–∑–º–µ–Ω—è–µ–º.
- –£–∑–µ–ª `Player`
  - –í –≥—Ä—É–ø–ø–µ `Layer` –≤—ã–±–µ—Ä–µ–º —Å–ª–æ–π `2` (`Player`) –∏ –≤—ã–∫–ª—é—á–∏–º —Å–ª–æ–π `1` (`World`). –ì—Ä—É–ø–ø—É –º–∞—Å–æ–∫ –Ω–µ –∏–∑–º–µ–Ω—è–µ–º.
- –£–∑–µ–ª `PlayerDetectArea`
  - –í –≥—Ä—É–ø–ø–µ `Layer` –≤—ã–∫–ª—é—á–∏–º –≤—Å–µ —Å–ª–æ–∏. –í –≥—Ä—É–ø–ø–µ `Mask` –≤—ã–±–µ—Ä–µ–º —Å–ª–æ–π `3` (`Interactive`) –∏ –≤—ã–∫–ª—é—á–∏–º —Å–ª–æ–π `1` (`World`).

## 4. –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–¥–∞ —É –æ–±—ä–µ–∫—Ç–æ–≤

> –ù–æ–≤—ã–µ —Å—Ç—Ä–æ—á–∫–∏ –∫–æ–¥–∞ –±—É–¥—É—Ç –ø–æ–º–µ—á–∞—Ç—å—Å—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–º `#!`, –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç—Ä–æ—á–∫–∏ - `#?`

–ö–æ–¥ `WorldCamera`:

```gdscript
class_name WorldCamera
extends Camera2D

@export var player: Player
@export var node_2d: Node2D #!

var pin_to_player: bool = true

func _ready() -> void:
	add_to_group("WorldCamera") #!
	if is_instance_valid(player):
		global_position = player.global_position

func set_pin_to_player(value: bool) -> void:
	pin_to_player = value

func _physics_process(_delta: float) -> void:
	if pin_to_player and is_instance_valid(player):
		global_position = player.global_position
    #! –ù–æ–≤–æ–µ —É—Å–ª–æ–≤–∏–µ
	elif not pin_to_player and is_instance_valid(node_2d):
		global_position = node_2d.global_position
```

–ö–æ–¥ `Portal`:

```gdscript
...
...
...

func _ready() -> void:
	state = state_init
	set_state(state) #?
	EventBus.interactive_item_interacted.connect(
		_on_interactive_item_interacted.bind()
	)

func set_state(value: State) -> void: #?
	state = value
	_check_state()

...
...
...
```

–ö–æ–¥ `Player`:

```gdscript
...
...
...

var current_state: State = State.Idle
var is_busy: bool #!

@onready var _animation: AnimatedSprite2D = $Animation
@onready var _interactive_ui: InteractiveUI = $InteractiveUI #!

...
...
...

func _ready() -> void:
	add_to_group("Player")
	_set_state(current_state)

#! –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è
func set_busy(value: bool) -> void:
	is_busy = value

#! –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è
func get_interactive_ui() -> InteractiveUI:
	return _interactive_ui

...
...
...

func _physics_process(delta: float) -> void:
	# –ì—Ä–∞–≤–∏—Ç–∞—Ü–∏—è
	if not is_on_floor():
		velocity += get_gravity() * delta
	
	# –ü—Ä—ã–∂–æ–∫
	#? –î–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —É—Å–ª–æ–≤–∏—è
	if Input.is_action_just_pressed("jump") and is_on_floor() and not is_busy:
		velocity.y = JUMP_VELOCITY
		
	# –î–≤–∏–∂–µ–Ω–∏–µ
	var direction := Input.get_axis("left", "right")
	#? –î–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —É—Å–ª–æ–≤–∏—è
	if direction and not is_busy:
		velocity.x = direction * SPEED
	else:
		velocity.x = move_toward(velocity.x, 0, SPEED)
	
	...
	...
	...
```

–ö–æ–¥ `PlayerDetectArea`:

```gdscript
...
...
...

func _on_area_exited(area: Area2D) -> void:
	if area is InteractiveArea:
		if _last_area == area: #!
            #? –ü–æ—Å–ª–µ–¥–Ω—è—è —Å—Ç—Ä–æ—á–∫–∞ –≤ —É—Å–ª–æ–≤–∏–∏
			EventBus.interactive_ui_hide.emit()
```

–ö–æ–¥ `InteractiveUI`:

```gdscript
class_name InteractiveUI
extends PanelContainer

var is_busy: bool #! –ù–æ–≤–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è

var _item: InteractiveArea

@onready var _item_name: Label = %ItemName
@onready var _item_desc: Label = %ItemDesc

func _ready() -> void:
	hide()
	_config_signals()

func _input(_event: InputEvent) -> void:
    #? –î–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —É—Å–ª–æ–≤–∏—è
	if Input.is_action_just_pressed("interact") and not is_busy:
		if visible and is_instance_valid(_item):
			_item.interact()

#! –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è
func set_busy(value: bool) -> void:
	is_busy = value

...
...
...
```

## 5. –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–∫—Ä—ã–≤–∞—Ç—å –ø–æ—Ä—Ç–∞–ª —Å –ø–æ–º–æ—â—å—é –∫–ª—é—á–∞

–°–æ–∑–¥–∞—ë–º –Ω–æ–≤—É—é —Å—Ü–µ–Ω—É —Ç–∏–ø–∞ `Node2D` –∏ –Ω–∞–∑—ã–≤–∞–µ–º –µ–≥–æ `PortalKeyConnecter`.

–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Å—Ü–µ–Ω—É –≤ –ø–∞–ø–∫–µ `objects` ‚û°Ô∏è `portal` ‚û°Ô∏è `connecter` —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º —Ñ–∞–π–ª–∞ `portal_key_connecter.tscn`.

–°–æ–∑–¥–∞–¥–∏–º –∫–æ–¥ –¥–ª—è `PortalKeyConnecter`:

```gdscript
class_name PortalKeyConnecter
extends Node2D

@export var portal: Portal
@export var portal_key: PortalKey

var _portal_key_interactive_area: InteractiveArea

func _ready() -> void:
	EventBus.interactive_item_interacted.connect(
		_on_interactive_item_interacted.bind()
	)
	if portal_key:
		_portal_key_interactive_area = portal_key.get_interactive()
	else:
		printerr(
			"[%s, %s]: –Ω–µ—Ç –ø—Ä–∏–≤—è–∑–∫–∏ –∫ –æ–±—ä–µ–∫—Ç—É –∫–ª–∞—Å—Å–∞ `PortalKey`" %\
			[name, owner.scene_file_path]
		)

func _logic() -> void:
	if portal:
		portal.set_state(Portal.State.OPEN)
	else:
		printerr(
			"[%s, %s]: –Ω–µ—Ç –ø—Ä–∏–≤—è–∑–∫–∏ –∫ –æ–±—ä–µ–∫—Ç—É –∫–ª–∞—Å—Å–∞ `Portal`" %\
			[name, owner.scene_file_path]
		)

func _on_interactive_item_interacted(item: InteractiveArea) -> void:
	match item.id:
		"portal_key":
			if item == _portal_key_interactive_area:
				_logic()
```

–î–æ–±–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–π —É–∑–µ–ª –Ω–∞ —É—Ä–æ–≤–µ–Ω—å –∏ —É–∫–∞–∑—ã–≤–∞–µ–º –ø–æ—Ä—Ç–∞–ª –∏ –∫–ª—é—á –≤ —Å–≤–æ–π—Å—Ç–≤–∞—Ö `Portal` –∏ `Portal Key` —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ.

## 6. –°–æ–∑–¥–∞–Ω–∏–µ –º–æ–Ω–µ—Ç—ã

–°–æ–∑–¥–∞—ë–º –Ω–æ–≤—É—é —Å—Ü–µ–Ω—É —Ç–∏–ø–∞ `RigidBody2D` –∏ –Ω–∞–∑—ã–≤–∞–µ–º –µ–≥–æ `Coin`.

–í–æ –≤–∫–ª–∞–¥–∫–µ `Collision` –≤ –≥—Ä—É–ø–ø–µ `Layer` –≤—ã–±–µ—Ä–µ–º —Å–ª–æ–π `3` (`Interactive`) –∏ –≤—ã–∫–ª—é—á–∏–º —Å–ª–æ–π `1` (`World`). –í –≥—Ä—É–ø–ø–µ `Mask` –≤—ã–±–µ—Ä–µ–º —Å–ª–æ–π `4` (`Enemy`), –º–∞—Å–∫—É `1` (`World`) –æ—Å—Ç–∞–≤–∏–º.

–¢–∞–∫–∂–µ –≤–∫–ª—é—á–∏–º `Contact Monitor` –≤–æ –≤–∫–ª–∞–¥–∫–µ `Solver` –∏ —É–∫–∞–∂–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ `10` –≤ —Å–≤–æ–π—Å—Ç–≤–µ `Max Contacts Reported` (–≤–æ–∑–º–æ–∂–Ω–æ, –≤ –±—É–¥—É—â–µ–º –º—ã –∏–∑–º–µ–Ω–∏–º –∑–Ω–∞—á–µ–Ω–∏–µ, –≤ –¥–∞–Ω–Ω–æ–º –¥–æ–∫—É–º–µ–Ω—Ç–µ —ç—Ç–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –Ω–µ –ø—Ä–∏–≥–æ–¥–∏—Ç—Å—è).

–°–æ–∑–¥–∞—ë–º —Å–ª–µ–¥—É—é—â—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –≤–Ω—É—Ç—Ä–∏ –æ–±—ä–µ–∫—Ç–∞:

- `InteractiveArea` (`ID`: `coin`, `UI Name`: `–ú–æ–Ω–µ—Ç–∞`, `UI Desc`: `–í–∑—è—Ç—å`, `Delete After`: `true`, `Size`: `(x: 64, y: 64)`)
- `Sprite2D` (`Texture`: –≤—ã–±–∏—Ä–∞–µ–º —Å–ø—Ä–∞–π—Ç –∫–ª—é—á–∞ `coin.png`, `Scale`: `(x: 0, y: 0)`)
- `Polygon` (—Ç–∏–ø `CollisionPolygon2D`; —Å–æ–∑–¥–∞—Ç—å —Å –ø–æ–º–æ—â—å—é `Sprite2D`, `Scale`: `(x: 0, y: 0)`)
- `AnimationPlayer` (—Å–æ–∑–¥–∞—Ç—å –∞–Ω–∏–º–∞—Ü–∏—é `show`, —Ç–∞–∫—É—é –∂–µ, –∫–∞–∫ —É —É–∑–ª–∞ `PortalKey`)

–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Å—Ü–µ–Ω—É –≤ –ø–∞–ø–∫–µ `objects` ‚û°Ô∏è `coin` —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º —Ñ–∞–π–ª–∞ `coin.tscn`.

–°–æ–∑–¥–∞–¥–∏–º –∫–æ–¥ –¥–ª—è `Coin`:

```gdscript
class_name Coin
extends RigidBody2D

@onready var _animation_player: AnimationPlayer = $AnimationPlayer
@onready var _interactive_area: InteractiveArea = $InteractiveArea

func _ready() -> void:
	_animation_player.play("show")
	gravity_scale = 0.0

func get_interactive() -> InteractiveArea:
	return _interactive_area

# –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å —Å–∏–≥–Ω–∞–ª `tree_exited`
# –û—Ç –æ–±—ä–µ–∫—Ç–∞ `InteractiveArea`
# –ö —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–º—É –æ–±—ä–µ–∫—Ç—É (`Coin`)
func _on_interactive_area_tree_exited() -> void:
	queue_free()

# –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å —Å–∏–≥–Ω–∞–ª `animation_finished`
# –û—Ç –æ–±—ä–µ–∫—Ç–∞ `AnimationPlayer`
# –ö —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–º—É –æ–±—ä–µ–∫—Ç—É (`Coin`)
func _on_animation_player_animation_finished(anim_name: StringName) -> void:
	if anim_name == "show":
		gravity_scale = 1.0

# –ù—É–∂–Ω–æ –ø—Ä–∏–≤—è–∑–∞—Ç—å —Å–∏–≥–Ω–∞–ª `_on_body_entered` —É —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ `Coin`
func _on_body_entered(body: Node) -> void:
	pass
```

–î–æ–±–∞–≤–∏–º –º–æ–Ω–µ—Ç—É –Ω–∞ —É—Ä–æ–≤–µ–Ω—å.

## 7. –°–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –∏–≥—Ä–æ–∫–∞: —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ –º–æ–Ω–µ—Ç—ã –≤ –º–∏—Ä–µ

–°–æ–∑–¥–∞—ë–º –Ω–æ–≤—É—é —Å—Ü–µ–Ω—É —Ç–∏–ø–∞ `Node2D` –∏ –Ω–∞–∑—ã–≤–∞–µ–º –µ–≥–æ `PlayerCoinManager`.

–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Å—Ü–µ–Ω—É –≤ –ø–∞–ø–∫–µ `objects` ‚û°Ô∏è `player` ‚û°Ô∏è `coin_manager` —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º —Ñ–∞–π–ª–∞ `player_coin_manager.tscn`.

–î–∞–Ω–Ω—ã–π —É–∑–µ–ª –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ—á–µ—Ä–Ω–∏–º –æ–±—ä–µ–∫—Ç–æ–≤ –≤–Ω—É—Ç—Ä–∏ —Å—Ü–µ–Ω—ã `Player`, –¥–æ–±–∞–≤—å—Ç–µ –µ–≥–æ –∫ –∏–≥—Ä–æ–∫—É –∏ —É –Ω–µ–≥–æ –≤ —Å–æ–≤—Å–µ–º —Å–∫–æ—Ä–æ –ø–æ—è–≤–∏—Ç—Å—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ–±–∏—Ä–∞—Ç—å –º–æ–Ω–µ—Ç—ã –∏ —Ä–∞—Å–ø–æ–ª–∞–≥–∞—Ç—å –∏—Ö –Ω–∞ —É—Ä–æ–≤–Ω–µ.

–°–æ–∑–¥–∞–¥–∏–º –∫–æ–¥ –¥–ª—è `PlayerCoinManager`:

```gdscript
class_name PlayerCoinManager
extends Node2D

enum States { OFF, ON }

const COIN_SCENE := preload("res://objects/coin/coin.tscn")
const COIN_SPRITE := preload("res://resources/sprites/coin.png")

const PREVIEW_POSITION_LIMIT := 200.0

var coins: int
var state: States = States.OFF

var _can_drop: bool
var _preview_coin: Sprite2D

func _ready() -> void:
	add_to_group("PlayerCoinManager")
	EventBus.interactive_item_interacted.connect(
		_on_interactive_item_interacted.bind()
	)
	
	if owner is not Player:
		printerr(
			"[%s, %s]: –æ–±—ä–µ–∫—Ç –≤–Ω–µ `Player`" %\
			[name, owner.scene_file_path]
		)

func _set_state(value: States) -> void:
	state = value
	_check_state()

func _check_state() -> void:
	var player := owner as Player
	var interactive_ui := player.get_interactive_ui()
	var world_camera := get_tree().get_first_node_in_group("WorldCamera") as WorldCamera
	match state:
		States.OFF:
			player.set_busy(false)
			interactive_ui.set_busy(false)
			_remove_preview_coin()
			_pin_to_world_camera(world_camera, player)
		States.ON:
			player.set_busy(true)
			interactive_ui.set_busy(true)
			_add_preview_coin()
			_pin_to_world_camera(world_camera, _preview_coin)

func _pin_to_world_camera(camera: WorldCamera, node_2d: Node2D) -> void:
	if node_2d is Player:
		camera.node_2d = null
		camera.pin_to_player = true
	else:
		camera.node_2d = node_2d
		camera.pin_to_player = false

func _add_preview_coin() -> void:
	var sprite := Sprite2D.new()
	sprite.texture = COIN_SPRITE
	sprite.modulate.a = 0.5
	_preview_coin = sprite
	add_child(_preview_coin)
	_check_preview_coin_position()

func _check_preview_coin_position() -> void:
	# –ü—Ä–æ–≤–µ—Ä–∫–∞, —Å–º–æ–∂–µ–º –ª–∏ –º—ã –±—Ä–æ—Å–∏—Ç—å –≤ –º–µ—Å—Ç–æ –º–æ–Ω–µ—Ç–∫—É
	if is_instance_valid(_preview_coin):
		var world := get_world_2d()
		var space_state := world.direct_space_state
		var parameters := PhysicsShapeQueryParameters2D.new()
		var shape := RectangleShape2D.new()
		
		shape.size = Vector2(60, 60)
		
		parameters.collision_mask = 1
		parameters.transform = _preview_coin.global_transform
		parameters.shape = shape
		
		var results := space_state.intersect_shape(parameters)
		
		if results.size() > 0:
			_can_drop = false
			_preview_coin.self_modulate = Color.RED
		else:
			_can_drop = true
			_preview_coin.self_modulate = Color.WHITE

func _move_preview_coin(direction: Vector2) -> void:
	match direction:
		Vector2.UP:
			_preview_coin.position.y = clampf(
				_preview_coin.position.y - 20,
				-PREVIEW_POSITION_LIMIT,
				PREVIEW_POSITION_LIMIT
			)
		Vector2.DOWN:
			_preview_coin.position.y = clampf(
				_preview_coin.position.y + 20,
				-PREVIEW_POSITION_LIMIT,
				PREVIEW_POSITION_LIMIT
			)
		Vector2.LEFT:
			_preview_coin.position.x = clampf(
				_preview_coin.position.x - 20,
				-PREVIEW_POSITION_LIMIT,
				PREVIEW_POSITION_LIMIT
			)
		Vector2.RIGHT:
			_preview_coin.position.x = clampf(
				_preview_coin.position.x + 20,
				-PREVIEW_POSITION_LIMIT,
				PREVIEW_POSITION_LIMIT
			)
	
	_check_preview_coin_position()

func _remove_preview_coin() -> void:
	if is_instance_valid(_preview_coin):
		_preview_coin.queue_free()
		_preview_coin = null

func _drop() -> void:
	if coins > 0 and _can_drop:
		var new_coin := COIN_SCENE.instantiate()
		# –ù–∞ —É—Ä–æ–≤–Ω–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É–∑–µ–ª `Objects` —Ç–∏–ø–∞ `Node2D`
		# –ü–æ –∏–µ—Ä–∞—Ä—Ö–∏–∏ –æ–Ω –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤—ã—à–µ —É–∑–ª–∞ `Player`
		get_tree().current_scene.get_node("Objects").add_child(new_coin)
		new_coin.global_position = _preview_coin.global_position
		coins -= 1
		
		if coins < 1:
			_set_state(States.OFF)

func _input(_event: InputEvent) -> void:
	if Input.is_action_just_pressed("drop"):
		match state:
			States.OFF:
				if coins > 0:
					_set_state(States.ON)
			States.ON:
				_set_state(States.OFF)
	elif state == States.ON:
		if Input.is_action_just_pressed("interact"):
			_drop()
		elif Input.is_action_pressed("ui_up"):
			_move_preview_coin(Vector2.UP)
		elif Input.is_action_pressed("ui_down"):
			_move_preview_coin(Vector2.DOWN)
		elif Input.is_action_pressed("ui_left"):
			_move_preview_coin(Vector2.LEFT)
		elif Input.is_action_pressed("ui_right"):
			_move_preview_coin(Vector2.RIGHT)

func _on_interactive_item_interacted(item: InteractiveArea) -> void:
	match item.id:
		"coin":
			coins += 1
```

–¢–µ–ø–µ—Ä—å, –∏–≥—Ä–æ–∫ —Å–º–æ–∂–µ—Ç –ø–æ–¥–±–∏—Ä–∞—Ç—å –º–æ–Ω–µ—Ç—ã –∏ –∏—Ö —Å–æ–±—Ä–∞–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±—É–¥–µ—Ç —É—á–∏—Ç—ã–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç. –ï—Å–ª–∏ —É –∏–≥—Ä–æ–∫–∞ –µ—Å—Ç—å –º–æ–Ω–µ—Ç—ã —Å —Å–æ–±–æ–π, –º–æ–∂–Ω–æ –Ω–∞–∂–∞—Ç—å –Ω–∞ –∫–ª–∞–≤–∏—à—É `Q` —á—Ç–æ–±—ã –ø–µ—Ä–µ–π—Ç–∏ –≤ —Ä–µ–∂–∏–º –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –º–æ–Ω–µ—Ç—ã. –í –¥–∞–Ω–Ω–æ–º —Ä–µ–∂–∏–º–µ, –∫–∞–º–µ—Ä–∞ –±—É–¥–µ—Ç —Å–ª–µ–¥–∏—Ç—å –∑–∞ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ–º –ø—Ä–∏–∑—Ä–∞—á–Ω–æ–π –º–æ–Ω–µ—Ç–æ–π, –∫–æ—Ç–æ—Ä—ã–º –∏–≥—Ä–æ–∫ –¥–≤–∏–≥–∞–µ—Ç —Å –ø–æ–º–æ—â—å—é –∫–ª–∞–≤–∏—à `WASD` –∏–ª–∏ —Å—Ç—Ä–µ–ª–æ–∫ `‚¨ÜÔ∏è‚¨ÖÔ∏è‚¨áÔ∏è‚û°Ô∏è` –Ω–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–µ, –∏ —Ä–∞–∑–º–µ—â–∞—Ç—å –µ—ë –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å –ø–æ–º–æ—â—å—é –∫–ª–∞–≤–∏—à–∏ `E`. –ß—Ç–æ–±—ã –≤—ã–π—Ç–∏ –∏–∑ —ç—Ç–æ–≥–æ —Ä–µ–∂–∏–º–∞, –Ω—É–∂–Ω–æ –Ω–∞–∂–∞—Ç—å –Ω–∞ –∫–ª–∞–≤–∏—à—É `Q`.

<div style="text-align: center;"><img src="./images/7-1.png" alt="–†–∏—Å—É–Ω–æ–∫ 7-1 ‚Äì –†–µ–∂–∏–º –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –º–æ–Ω–µ—Ç—ã"></div>
<p align="center">–†–∏—Å—É–Ω–æ–∫ 7-1 ‚Äì –†–µ–∂–∏–º –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –º–æ–Ω–µ—Ç—ã</p>

> –ù–µ –±–æ–π—Ç–µ—Å—å –∏–∑–º–µ–Ω—è—Ç—å —Ä–∞–∑–º–µ—Ä `PlayerDetectArea` (—Ä–∏—Å. 7-2)

<div style="text-align: center;"><img src="./images/7-2.png" alt="–†–∏—Å—É–Ω–æ–∫ 7-2 ‚Äì –†–∞–∑–º–µ—Ä `PlayerDetectArea` —É –∏–≥—Ä–æ–∫–∞"></div>
<p align="center">–†–∏—Å—É–Ω–æ–∫ 7-2 ‚Äì –†–∞–∑–º–µ—Ä `PlayerDetectArea` —É –∏–≥—Ä–æ–∫–∞</p>